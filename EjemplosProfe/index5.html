<html>
  <head>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Piso -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="50" height="50" color="lightgray"></a-plane>

      <!-- Esferas (objetos a recolectar) -->
      <a-sphere class="collectible" position="0 1 -5" radius="0.5" color="red"></a-sphere>
      <a-sphere class="collectible" position="3 1 -8" radius="0.5" color="blue"></a-sphere>
      <a-sphere class="collectible" position="-4 1 -10" radius="0.5" color="green"></a-sphere>

      <!-- Cámara con control WASD -->
      <a-entity id="player" camera wasd-controls position="0 1.6 0">
        <a-cursor></a-cursor>
      </a-entity>

      <!-- Texto marcador de puntos -->
      <a-entity id="scoreText" text="value: Puntos: 0; color: black; width: 4"
                position="0 2 -2"></a-entity>
    </a-scene>

    <script>
      let score = 0;
      const player = document.querySelector('#player');
      const collectibles = document.querySelectorAll('.collectible');
      const scoreText = document.querySelector('#scoreText');

      function checkCollisions() {
        const playerPos = player.object3D.position;
        collectibles.forEach(item => {
          if (!item.getAttribute('visible')) return;
          const itemPos = item.object3D.position;
          const dist = playerPos.distanceTo(itemPos);
          if (dist < 1.2) { // distancia de colisión
            item.setAttribute('visible', false);
            score++;
            scoreText.setAttribute('text', 'value: Puntos: ' + score);
          }
        });
      }

      // revisar colisiones cada 100ms
      setInterval(checkCollisions, 100);
    </script>
  </body>
</html>
